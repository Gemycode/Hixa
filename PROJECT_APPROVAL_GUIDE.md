# ุฏููู ูุธุงู ูุจูู ูุฑูุถ ุงููุดุงุฑูุน

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุธุงู ูุจูู ูุฑูุถ ุงููุดุงุฑูุน ูุณูุญ ููุฃุฏูู ุจูุฑุงุฌุนุฉ ุงููุดุงุฑูุน ุงููุถุงูุฉ ูู ูุจู ุงูุนููุงุก ูุจู ูุดุฑูุง ูููููุฏุณูู.

---

## ๐ ุณูุฑ ุงูุนูู (Workflow)

1. **ุงูุนููู ูุถูู ูุดุฑูุน** โ ุงูุญุงูุฉ: `Pending Review`ุ ููุงููุฉ ุงูุฃุฏูู: `pending`
2. **ุงูุฃุฏูู ูุฑุงุฌุน ุงููุดุฑูุน** โ ููุฑุฑ ุงูููุงููุฉ ุฃู ุงูุฑูุถ
3. **ุฅุฐุง ูุงูู ุงูุฃุฏูู** โ ุงูุญุงูุฉ: `Waiting for Engineers` (ูุธูุฑ ูููููุฏุณูู)
4. **ุฅุฐุง ุฑูุถ ุงูุฃุฏูู** โ ุงูุญุงูุฉ: `Rejected` (ูุง ูุธูุฑ ูููููุฏุณูู)

---

## ๐ ุญุงูุงุช ุงููุดุฑูุน (Status)

- `Draft` - ูุณูุฏุฉ
- `Pending Review` - ูู ุงูุชุธุงุฑ ูุฑุงุฌุนุฉ ุงูุฃุฏูู
- `Waiting for Engineers` - ุชูุช ุงูููุงููุฉุ ูู ุงูุชุธุงุฑ ุนุฑูุถ ุงููููุฏุณูู
- `In Progress` - ููุฏ ุงูุชูููุฐ
- `Completed` - ููุชูู
- `Cancelled` - ููุบู
- `Rejected` - ูุฑููุถ ูู ุงูุฃุฏูู

---

## ๐ ุงููุณุงุฑุงุช (Routes)

### 1. ุฅูุดุงุก ูุดุฑูุน (ุงูุนููู)

```
POST /api/projects
```

**Headers:**
```
Authorization: Bearer CLIENT_TOKEN
Content-Type: application/json
```

**Body:**
```json
{
  "title": "ูุดุฑูุน ุจูุงุก",
  "description": "ูุตู ุงููุดุฑูุน",
  "location": "ุงูุฑูุงุถ",
  "projectType": "Construction",
  "budget": {
    "amount": 50000,
    "currency": "SAR"
  }
}
```

**Response:**
```json
{
  "message": "ุชู ุฅูุดุงุก ุงููุดุฑูุน ุจูุฌุงุญ",
  "data": {
    "_id": "...",
    "title": "ูุดุฑูุน ุจูุงุก",
    "status": "Pending Review",
    "adminApproval": {
      "status": "pending",
      "reviewedBy": null,
      "reviewedAt": null,
      "rejectionReason": null
    }
  }
}
```

**ููุงุญุธุฉ**: ุงููุดุฑูุน ูุจุฏุฃ ุชููุงุฆูุงู ูู ุญุงูุฉ `Pending Review` ูููุชุธุฑ ููุงููุฉ ุงูุฃุฏูู.

---

### 2. ุฌูุจ ุงููุดุงุฑูุน ูู ุงูุชุธุงุฑ ุงููุฑุงุฌุนุฉ (ุงูุฃุฏูู ููุท)

```
GET /api/projects/pending?page=1&limit=10
```

**Headers:**
```
Authorization: Bearer ADMIN_TOKEN
```

**Response:**
```json
{
  "data": [
    {
      "_id": "...",
      "title": "ูุดุฑูุน ุจูุงุก",
      "status": "Pending Review",
      "client": {
        "_id": "...",
        "name": "ุนููู",
        "email": "client@example.com"
      },
      "adminApproval": {
        "status": "pending"
      },
      "createdAt": "2024-01-01T00:00:00.000Z"
    }
  ],
  "meta": {
    "total": 5,
    "page": 1,
    "limit": 10,
    "pages": 1
  }
}
```

---

### 3. ุงูููุงููุฉ ุนูู ูุดุฑูุน (ุงูุฃุฏูู ููุท)

```
PATCH /api/projects/:id/approve
```

**Headers:**
```
Authorization: Bearer ADMIN_TOKEN
```

**Response:**
```json
{
  "message": "ุชู ุงูููุงููุฉ ุนูู ุงููุดุฑูุน ุจูุฌุงุญ",
  "data": {
    "_id": "...",
    "title": "ูุดุฑูุน ุจูุงุก",
    "status": "Waiting for Engineers",
    "adminApproval": {
      "status": "approved",
      "reviewedBy": {
        "_id": "...",
        "name": "Admin",
        "email": "admin@example.com"
      },
      "reviewedAt": "2024-01-01T01:00:00.000Z",
      "rejectionReason": null
    }
  }
}
```

**ุงูุชุฃุซูุฑ**: 
- ุงูุญุงูุฉ ุชุชุบูุฑ ูู `Pending Review` ุฅูู `Waiting for Engineers`
- ุงููุดุฑูุน ูุธูุฑ ูููููุฏุณูู
- ูููู ูููููุฏุณูู ุฅุฑุณุงู ุนุฑูุถ

---

### 4. ุฑูุถ ูุดุฑูุน (ุงูุฃุฏูู ููุท)

```
PATCH /api/projects/:id/reject
```

**Headers:**
```
Authorization: Bearer ADMIN_TOKEN
Content-Type: application/json
```

**Body:**
```json
{
  "rejectionReason": "ุงููุดุฑูุน ูุง ูุชูุงูู ูุน ูุนุงููุฑูุง ุฃู ูุญุชุงุฌ ููุฒูุฏ ูู ุงูุชูุงุตูู"
}
```

**Response:**
```json
{
  "message": "ุชู ุฑูุถ ุงููุดุฑูุน",
  "data": {
    "_id": "...",
    "title": "ูุดุฑูุน ุจูุงุก",
    "status": "Rejected",
    "adminApproval": {
      "status": "rejected",
      "reviewedBy": {
        "_id": "...",
        "name": "Admin",
        "email": "admin@example.com"
      },
      "reviewedAt": "2024-01-01T01:00:00.000Z",
      "rejectionReason": "ุงููุดุฑูุน ูุง ูุชูุงูู ูุน ูุนุงููุฑูุง ุฃู ูุญุชุงุฌ ููุฒูุฏ ูู ุงูุชูุงุตูู"
    }
  }
}
```

**ุงูุชุฃุซูุฑ**: 
- ุงูุญุงูุฉ ุชุชุบูุฑ ุฅูู `Rejected`
- ุงููุดุฑูุน ูุง ูุธูุฑ ูููููุฏุณูู
- ุงูุนููู ูุฑู ุณุจุจ ุงูุฑูุถ

---

## ๐ ุฌูุจ ุงููุดุงุฑูุน ุญุณุจ ุงูุฏูุฑ

### ููุนููู:
```
GET /api/projects
```
- ูุฑู ุฌููุน ูุดุงุฑูุนู (ุจูุง ูู ุฐูู ุงููุฑููุถุฉ)
- ููููู ููุชุฑุฉ ุจู `status`

### ูููููุฏุณ:
```
GET /api/projects
```
- ูุฑู ููุท ุงููุดุงุฑูุน ุงูููุงูู ุนูููุง (`status: "Waiting for Engineers"`)
- ูุง ูุฑู ุงููุดุงุฑูุน ุงููุฑููุถุฉ ุฃู ูู ุงูุชุธุงุฑ ุงููุฑุงุฌุนุฉ

### ููุฃุฏูู:
```
GET /api/projects
```
- ูุฑู ุฌููุน ุงููุดุงุฑูุน (ุจูุง ูู ุฐูู ุงููุฑููุถุฉ)
- ููููู ุงุณุชุฎุฏุงู `/api/projects/pending` ูููุดุงุฑูุน ูู ุงูุชุธุงุฑ ุงููุฑุงุฌุนุฉ

---

## ๐ ูุนูููุงุช ุฅุถุงููุฉ ูู Response

ุฌููุน ุงุณุชุฌุงุจุงุช ุงููุดุฑูุน ุชุญุชูู ุนูู:

```json
{
  "adminApproval": {
    "status": "pending" | "approved" | "rejected",
    "reviewedBy": {
      "_id": "...",
      "name": "...",
      "email": "..."
    } | null,
    "reviewedAt": "2024-01-01T00:00:00.000Z" | null,
    "rejectionReason": "..." | null
  }
}
```

---

## โ๏ธ ููุงุนุฏ ูููุฉ

1. **ุงูุนููู ูุง ููููู**:
   - ุชุบููุฑ ุญุงูุฉ ุงููุดุฑูุน ูู `Pending Review` ุฅูู `Waiting for Engineers`
   - ุฑุคูุฉ ุงููุดุงุฑูุน ุงูููุงูู ุนูููุง ููุท (ูุฑู ุฌููุน ูุดุงุฑูุนู)

2. **ุงููููุฏุณ ูุง ููููู**:
   - ุฑุคูุฉ ุงููุดุงุฑูุน ุบูุฑ ุงูููุงูู ุนูููุง
   - ุฅุฑุณุงู ุนุฑูุถ ูููุดุงุฑูุน ุงููุฑููุถุฉ

3. **ุงูุฃุฏูู ููุท**:
   - ุงูููุงููุฉ ุฃู ุงูุฑูุถ
   - ุฑุคูุฉ ุฌููุน ุงููุดุงุฑูุน ุจุฌููุน ุญุงูุงุชูุง

---

## ๐งช ุฃูุซูุฉ ููุงุฎุชุจุงุฑ

### 1. ุงูุนููู ููุดุฆ ูุดุฑูุน
```http
POST /api/projects
Authorization: Bearer CLIENT_TOKEN
Content-Type: application/json

{
  "title": "ุจูุงุก ููุฒู",
  "description": "ูุดุฑูุน ุจูุงุก ููุฒู ูู ุทุงุจููู",
  "location": "ุฌุฏุฉ",
  "projectType": "Construction",
  "budget": {
    "amount": 500000,
    "currency": "SAR"
  }
}
```

### 2. ุงูุฃุฏูู ูุฑู ุงููุดุงุฑูุน ูู ุงูุชุธุงุฑ ุงููุฑุงุฌุนุฉ
```http
GET /api/projects/pending
Authorization: Bearer ADMIN_TOKEN
```

### 3. ุงูุฃุฏูู ููุงูู ุนูู ุงููุดุฑูุน
```http
PATCH /api/projects/PROJECT_ID/approve
Authorization: Bearer ADMIN_TOKEN
```

### 4. ุงูุฃุฏูู ูุฑูุถ ูุดุฑูุน
```http
PATCH /api/projects/PROJECT_ID/reject
Authorization: Bearer ADMIN_TOKEN
Content-Type: application/json

{
  "rejectionReason": "ุงููุดุฑูุน ูุญุชุงุฌ ููุฒูุฏ ูู ุงูุชูุงุตูู ุญูู ุงููููุน ูุงูููุฒุงููุฉ"
}
```

---

## โ Checklist ููุงุฎุชุจุงุฑ

- [ ] ุงูุนููู ููุดุฆ ูุดุฑูุน โ ูุฌุจ ุฃู ูููู `Pending Review`
- [ ] ุงูุฃุฏูู ูุฑู ุงููุดุงุฑูุน ูู ุงูุชุธุงุฑ ุงููุฑุงุฌุนุฉ
- [ ] ุงูุฃุฏูู ููุงูู ุนูู ูุดุฑูุน โ ูุชุบูุฑ ุฅูู `Waiting for Engineers`
- [ ] ุงูุฃุฏูู ูุฑูุถ ูุดุฑูุน ูุน ุณุจุจ โ ูุชุบูุฑ ุฅูู `Rejected`
- [ ] ุงููููุฏุณ ูุฑู ููุท ุงููุดุงุฑูุน ุงูููุงูู ุนูููุง
- [ ] ุงูุนููู ูุฑู ุฌููุน ูุดุงุฑูุนู (ุจูุง ูู ุฐูู ุงููุฑููุถุฉ)
- [ ] ุงููุดุฑูุน ุงููุฑููุถ ูุง ูุธูุฑ ูููููุฏุณูู

---

**๐ ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู!**
